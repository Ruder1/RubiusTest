<div class="MainContent">
  <div class="CreateUserElement">
    <button
      class="CreateUser btn opacity-75 btn-outline-second"
      (click)="onItemSelect()"
      (click)="modalService.open()"
    >
      Создать нового пользователя
    </button>
  </div>
  <div class="SearchUserElement">
    <!-- ВЫбрать между двумя поисками -->
    <form>
      <input
        type="text"
        name="text"
        class="Search form-control"
        placeholder="Поиск"
        (change)="filterResults(filter.value)"
        #filter
      />
    </form>
  </div>

  <div class="InfoContainer">
    <div class="InfoElement">Отделы</div>
    <ng-select
      class="custom"
      [items]="division"
      [multiple]="true"
      bindLabel="name"
      [selectableGroup]="true"
      [closeOnSelect]="false"
      bindValue="id"
      [(ngModel)]="selectedDivision"
      groupBy="subdivision"
      name="main"
    >
      <ng-template
        ng-optgroup-tmp
        let-item="item"
        let-item$="item$"
        let-index="index"
      >
        <input
          id="item-{{ index }}"
          type="checkbox"
          [ngModel]="item$.selected"
        />
        {{ item.subdivision | uppercase }}
      </ng-template>
      <ng-template
        ng-option-tmp
        let-item="item"
        let-item$="item$"
        let-index="index"
      >
        <input
          id="item-{{ index }}"
          type="checkbox"
          [ngModel]="item$.selected"
        />
        {{ item.name }}
      </ng-template>
    </ng-select>

    <div class="InfoElement">Оклад мин / макс</div>

    <input
      type="number"
      class="MinMaxValue"
      placeholder="0"
      [(ngModel)]="minSalary"
    />
    <input
      type="number"
      class="MinMaxValue"
      placeholder="0"
      [(ngModel)]="maxSalary"
    />

    <div>
      <button
        type="button"
        class="FilterButton btn btn-primary btn-outline-second"
        (click)="filterResults(filter.value)"
      >
        Фильтр
      </button>
    </div>
  </div>
  <div>
   
    
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>
        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
          <td mat-cell *matCellDef="let row; let i = index">{{ i + 1 }}</td>
        </ng-container>
    
        <!-- Progress Column -->
        <ng-container matColumnDef="fio">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>FIO</th>
          <td mat-cell *matCellDef="let row">{{ makeFio(row) }}</td>
        </ng-container>
    
        <!-- Name Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>email</th>
          <td mat-cell *matCellDef="let row">{{ row.email }}</td>
        </ng-container>
    
        <!-- Fruit Column -->
        <ng-container matColumnDef="salary">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Salary</th>
          <td mat-cell *matCellDef="let row">{{ row.salary }}</td>
        </ng-container>
    
        <!-- Control Column -->
        <ng-container matColumnDef="control">
          <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
          <td mat-cell *matCellDef="let user; let i = index">
            <div class="ControlRow">
              <div>
                <input
                  class="m-1 flex-none"
                  type="image"
                  src="assets\images\pencil-square.svg"
                  name="edit"
                  (click)="EditItem(i, user)"
                  (click)="modalService.open()"
                />
              </div>
    
              <div>
                <input
                  class="m-1 flex-none"
                  type="image"
                  src="assets\images\trash.svg"
                  name="delete"
                  (click)="DeleteItem(i, user)"
                />
              </div>
            </div>
          </td>
        </ng-container>
    
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            No data matching the filter "{{ filter.value }}"
          </td>
        </tr>
      </table>
    
      <mat-paginator
        [pageSizeOptions]="[5, 10, 25, 100]"
        [length]="users.length"
        aria-label="select page"
        #paginator
      ></mat-paginator>
    </div>
  </div>
  <app-modal
    [(user)]="currentUser"
    (userChange)="onAdd($event)"
    *ngIf="modalService.isVisible$ | async"
    title="Create new User"
  >
  </app-modal>
</div>
